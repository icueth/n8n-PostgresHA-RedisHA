# ==============================================
# n8n Enterprise-Ready Stack - Environment Example
# ==============================================
# Copy this file to .env and fill in your values
# ==============================================

# ==============================================
# REQUIRED: Secrets (Generate these!)
# ==============================================

# PostgreSQL password
POSTGRES_PASSWORD=your_secure_postgres_password_here

# Redis password
REDIS_PASSWORD=your_secure_redis_password_here

# n8n encryption key (for credentials)
N8N_ENCRYPTION_KEY=your_32_character_encryption_key

# n8n JWT secret (for user authentication)
N8N_USER_MANAGEMENT_JWT_SECRET=your_64_character_jwt_secret_here

# n8n Task Runner Auth Token (for external Python/JS runners)
N8N_TASKS_RUNNER_AUTH_TOKEN=your_secure_32_character_token_here

# ==============================================
# DATABASE CONFIGURATION
# ==============================================

DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=postgres-18-proxy.railway.internal
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=postgres
# DB_POSTGRESDB_PASSWORD is set from POSTGRES_PASSWORD above
DB_POSTGRESDB_SSL_ENABLED=false

# ==============================================
# REDIS / QUEUE CONFIGURATION
# ==============================================

# Execution mode: 'regular' or 'queue'
# Use 'queue' for horizontal scaling with workers
EXECUTIONS_MODE=queue

# Redis connection for queue
QUEUE_BULL_REDIS_HOST=redis.railway.internal
QUEUE_BULL_REDIS_PORT=6379
# QUEUE_BULL_REDIS_PASSWORD is set from REDIS_PASSWORD above
QUEUE_HEALTH_CHECK_ACTIVE=true

# ==============================================
# n8n CONFIGURATION
# ==============================================

# Protocol and host (Railway sets these automatically)
N8N_PROTOCOL=https
N8N_HOST=your-app.up.railway.app
WEBHOOK_URL=https://your-app.up.railway.app/

# Timezone
GENERIC_TIMEZONE=Asia/Bangkok
TZ=Asia/Bangkok

# Metrics and diagnostics
N8N_METRICS=true
N8N_DIAGNOSTICS_ENABLED=false
N8N_VERSION_NOTIFICATIONS_ENABLED=false
N8N_TEMPLATES_ENABLED=true
N8N_HIRING_BANNER_ENABLED=false

# Security
N8N_SECURE_COOKIE=true

# Logging
N8N_LOG_LEVEL=info

# ==============================================
# EXECUTION DATA MANAGEMENT
# ==============================================

# Auto-prune old executions
EXECUTIONS_DATA_PRUNE=true
EXECUTIONS_DATA_MAX_AGE=168

# What to save
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true

# ==============================================
# WORKER CONFIGURATION (for n8n-worker service)
# ==============================================

# Max parallel executions per worker
N8N_CONCURRENCY_PRODUCTION_LIMIT=10

# ==============================================
# LOCAL DEVELOPMENT (Override for local testing)
# ==============================================

# Uncomment for local development:
# DB_POSTGRESDB_HOST=localhost
# QUEUE_BULL_REDIS_HOST=localhost
# N8N_PROTOCOL=http
# N8N_HOST=localhost:5678
# WEBHOOK_URL=http://localhost:5678/
# N8N_SECURE_COOKIE=false
